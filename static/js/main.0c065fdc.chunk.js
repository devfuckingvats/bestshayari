(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},125:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),s=a.n(c),i=(a(102),a(14)),o=a(13),l=a(16),u=a(15),h=a(17),g=(a(103),a(34)),d=a(41),p=(a(104),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tags,a=e.shayariObject;return r.a.createElement(r.a.Fragment,null,t.map(function(e){return r.a.createElement("div",{className:"tagCards",key:e},r.a.createElement(g.b,{to:"/tags/".concat(e)},e),r.a.createElement("span",null," ",a[e].totalShayaris))}))}}]),t}(n.Component)),m=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error404"))}}]),t}(n.Component),f=a(12),b=a.n(f),E=a(50),j=a(31),O=(a(125),a(181));var y=function(e){var t=e.open,a=e.message,n=e.handleClose;return r.a.createElement("div",null,r.a.createElement(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:n,message:a,autoHideDuration:2e3}))},v=a(79),C=a.n(v),S=a(80),w=a.n(S),T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).fetchContent=function(){var e=[],t=[],n=[],r={},c={},s=[];a.state.shayariObject[a.props.tag].titleArray.length||b.a.firestore().collection("tags").doc(a.props.tag).collection("shayaris").orderBy("timestamp","desc").get().then(function(i){var o=0;i.forEach(function(i){var l=i.data().title,u=i.data().content,h=i.data().poet;s=i.data().tags,e.push(l),t.push(u),n.push(h),Object.assign(c,Object(j.a)({},o,a.state.tags)),Object.assign(r,Object(j.a)({},o,s)),o++}),a.setState(function(s){return{shayariObject:Object.assign({},s.shayariObject,Object(j.a)({},a.props.tag,Object(E.a)({},s.shayariObject[a.props.tag],{titleArray:e,contentArray:t,poetArray:n,relatedTagsObject:r,tagsToShowObject:c})))}},function(){a.props.putIntoShayariObject(a.state.shayariObject)})})},a.handleContentClick=function(e,t){e.target.innerHTML=t},a.handleSnackbarClose=function(){a.setState({snackbar:!1})},a.handleCopy=function(){a.setState({snackbar:!0})},a.handleSeeMore=function(e,t,n){a.setState(function(a){return{shayariObject:Object.assign({},a.shayariObject,Object(j.a)({},e,Object(E.a)({},a.shayariObject[e],{tagsToShowObject:Object(E.a)({},a.shayariObject[e].tagsToShowObject,Object(j.a)({},t,n))})))}})},a.handleSeeLess=function(e,t){a.setState(function(n){return{shayariObject:Object.assign({},n.shayariObject,Object(j.a)({},e,Object(E.a)({},n.shayariObject[e],{tagsToShowObject:Object(E.a)({},n.shayariObject[e].tagsToShowObject,Object(j.a)({},t,a.state.tagsToShow))})))}})},a.state={shayariObject:Object.assign({},e.shayariObject),snackbar:!1,pageSize:5,tagsToShow:2},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=this,t=this.props.shayariObject[this.props.tag].tagsToShowObject;Object.keys(t).forEach(function(a){return t[a]=e.state.tagsToShow}),this.setState(function(e){return{pageSize:5}})}},{key:"render",value:function(){var e=this,t=this.props.tag,a=this.state,n=a.shayariObject,c=a.pageSize,s=n[t].titleArray,i=n[t].contentArray,o=n[t].poetArray,l=n[t].relatedTagsObject,u=n[t].tagsToShowObject,h={fontSize:"22px"};return r.a.createElement("div",{id:"tagPage"},r.a.createElement("h2",{style:{textAlign:"center",textTransform:"capitalize"}},t),r.a.createElement("hr",null),n[t].titleArray.length?s.slice(0,c).map(function(a,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{className:"shayariCard div".concat(n)},r.a.createElement("div",{className:"shayariCardHeader div".concat(n)},r.a.createElement(C.a,{className:"copyBtn","data-clipboard-text":s[n].charAt(0).toUpperCase()+s[n].slice(1)+"\n"+i[n].charAt(0).toUpperCase()+i[n].slice(1)+"\nbestshayaris.com",onClick:e.handleCopy},"copy")),r.a.createElement("div",{className:"div".concat(n," shayariCardTitle")},a.charAt(0).toUpperCase()+a.slice(1)),r.a.createElement("br",null),r.a.createElement("div",{className:"div".concat(n," shayariCardContent"),onClick:function(t){return e.handleContentClick(t,i[n])}},i[n].length>200?i[n].substring(0,200)+"....":i[n]),r.a.createElement("div",{className:"shayariCardPoet"},r.a.createElement("span",null,o[n])),r.a.createElement("div",{className:"shayariCardLinks"},r.a.createElement(w.a,{style:h}),l[n].slice(0,u[n]).map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(g.b,{to:"./".concat(e),className:"relatedLinks"},0===t?null:",",e))}),u[n]<l[n].length?r.a.createElement("span",{onClick:function(){return e.handleSeeMore(t,n,l[n].length)},className:"seeMore"},"see more"):r.a.createElement("span",{onClick:function(){return e.handleSeeLess(t,n)},className:"seeLess"},"see less")),r.a.createElement("br",null)),r.a.createElement("hr",null))}):this.fetchContent(),n[t].totalShayaris>c?r.a.createElement("div",{className:"seeMoreDiv",onClick:function(){return e.setState(function(e){return{pageSize:e.pageSize+5}})}},console.log(c,s.length),r.a.createElement("span",{className:"seeMoreSpan"},"See more")):null,r.a.createElement(y,{open:this.state.snackbar,message:"copied.",handleClose:this.handleSnackbarClose}))}}]),t}(n.Component),k=a(83),N=a(175),I=a(171),x=a(177),L=a(183),A=a(172),V=a(179),D=a(185),M=a(186),F=(a(128),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleTagChange=function(e){a.setState(function(t){return{tags:e.target.value}})},a.handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleContentChange=function(e){a.setState({content:e.target.value})},a.handlePoetChange=function(e){a.setState({poet:e.target.value})},a.upload=function(){var e=a.state.tags,t=a.state.title,n=a.state.content,r=a.state.poet;e&&t&&n?(a.setState({uploading:!0}),""!==a.state.newTagInputValue?(a.setState(function(e){return{tags:[].concat(Object(k.a)(e.tags),[a.state.newTagInputValue])}}),b.a.firestore().collection("tags").doc(a.state.newTagInputValue).set({totalShayaris:0}).then(function(){a.state.tags.forEach(function(e,c){b.a.firestore().collection("tags").doc(e).update({totalShayaris:b.a.firestore.FieldValue.increment(1)}).then(function(){b.a.firestore().collection("tags").doc(e).collection("shayaris").doc().set({title:t,content:n,timestamp:b.a.firestore.FieldValue.serverTimestamp(),tags:a.state.tags,poet:r}).then(function(){c===a.state.tags.length-1&&(a.setState({title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1}),alert("uploaded"))})}).catch(function(e){alert("cannot upload due to some error.")})})})):a.state.tags.forEach(function(e,c){b.a.firestore().collection("tags").doc(e).update({totalShayaris:b.a.firestore.FieldValue.increment(1)}).then(function(){b.a.firestore().collection("tags").doc(e).collection("shayaris").doc().set({title:t,content:n,poet:r,timestamp:b.a.firestore.FieldValue.serverTimestamp(),tags:a.state.tags}).then(function(){c===a.state.tags.length-1&&(a.setState({title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1}),alert("uploaded"))})}).catch(function(e){alert("cannot upload due to some error.")})})):alert("error")},a.showNewTagInput=function(){a.setState({newTagInput:!a.state.newTagInput})},a.handleNewTag=function(e){a.setState({newTagInputValue:e.target.value})},a.authMe=function(e){""!==a.state.password&&a.state.password===e.target.value&&a.setState({authenticated:!0})},a.state={authenticated:!1,password:"",title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.firestore().collection("users").doc("auth").get().then(function(t){e.setState({password:t.data().password})})}},{key:"render",value:function(){var e=this;return this.state.authenticated?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(I.a,null,r.a.createElement(L.a,{htmlFor:"select-multiple-chip"},"Tag"),r.a.createElement(x.a,{multiple:!0,value:this.state.tags,onChange:function(t){return e.handleTagChange(t)},input:r.a.createElement(A.a,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.join(", ")}},this.props.tags.map(function(t){return r.a.createElement(N.a,{key:t,value:t},r.a.createElement(V.a,{checked:e.state.tags.indexOf(t)>-1}),r.a.createElement(D.a,{primary:t}))})),r.a.createElement("button",{className:"newTagBtn",onClick:this.showNewTagInput},"New Tag"),this.state.newTagInput?r.a.createElement(M.a,{label:"New Tag",placeholder:"type your tag",value:this.state.newTagInputValue,onChange:this.handleNewTag}):null,r.a.createElement(M.a,{label:"Title",placeholder:"Choose title wisely",margin:"normal",value:this.state.title,onChange:function(t){return e.handleTitleChange(t)}}),r.a.createElement(M.a,{label:"Content",placeholder:"Write beyond imagination",multiline:!0,margin:"normal",value:this.state.content,onChange:function(t){return e.handleContentChange(t)}}),r.a.createElement(M.a,{label:"Poet",placeholder:"Poet",margin:"normal",value:this.state.poet,onChange:function(t){return e.handlePoetChange(t)}}),r.a.createElement("button",{type:"submit",onClick:this.upload,className:"uploadBtn",disabled:this.state.uploading},"Upload"))):r.a.createElement("input",{placeholder:"password",onChange:function(t){return e.authMe(t)}})}}]),t}(n.Component)),z=(a(129),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputFocus=function(e){a.setState({searching:!0})},a.handleInputChange=function(e){a.setState({searchingWord:e.target.value,searchingList:a.props.tags.filter(function(t){return-1!==t.indexOf(e.target.value.toLowerCase())})})},a.state={searching:!1,searchingWord:"",searchingList:e.tags},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.searching?window.addEventListener("popstate",function(){return e.setState({searching:!1,searchingWord:""})}):null,r.a.createElement("input",{style:this.state.searching?{position:"absolute",border:"none",left:"0",width:"100%",margin:"0",height:"35px"}:{position:"absolute",width:"20%",right:"0",margin:"6px",height:"25px",fontSize:"16px",border:"1px solid black",paddingLeft:"5px",transition:".4s",boxShadow:"1px 1px 3px"},placeholder:"search...",maxLength:"20",onClick:function(t){return e.setState({searching:!0,searchingWord:t.target.value})},value:this.state.searchingWord,onChange:function(t){return e.handleInputChange(t)}}),this.state.searching?r.a.createElement("div",{id:"searchingListParent"},r.a.createElement("ul",{className:"searchingList",onClick:function(){return e.setState({searching:!1,searchingWord:"",searchingList:e.props.tags})}},this.state.searchingList.map(function(e,t){return r.a.createElement(g.b,{key:e,to:"/tags/".concat(e),className:"searchingListItemLink"},r.a.createElement("li",{className:"searchingListItem"},e))}))):null)}}]),t}(n.Component)),P=Object(d.f)(z),W=a(82),B=a.n(W),U=a(180),H=a(81),J=a.n(H),K=a(176),R=a(174),G=a(134),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleDrawer=function(){a.setState({open:!a.state.open})},a.state={open:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{fontSize:"large",onClick:this.toggleDrawer}),r.a.createElement(U.a,{anchor:"left",open:this.state.open,onClose:this.toggleDrawer},r.a.createElement("div",{role:"presentation",onClick:function(){return e.toggleDrawer()},onKeyDown:function(){return e.toggleDrawer()}},r.a.createElement(R.a,null,r.a.createElement(G.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(J.a,null)),r.a.createElement(D.a,null,r.a.createElement(g.b,{to:"/",className:"drawerTextLink"},"Home")))))))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){a.props.relatedTags.forEach(function(e,t){b.a.firestore().collection("tags").doc(e).collection("shayaris").where("content","==",a.props.content).get().then(function(n){n.forEach(function(n){n.ref.delete().then(function(){b.a.firestore().collection("tags").doc(e).update({totalShayaris:b.a.firestore.FieldValue.increment(-1)}).then(function(){t===a.props.relatedTags.length-1&&a.props.closeEditing()})}).catch(function(e){alert(e.message)})})})})},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.content,c=t.relatedTags;return r.a.createElement("div",null,r.a.createElement("div",{id:"editTitle"},a),r.a.createElement("div",{id:"editContent"},n),r.a.createElement("div",null,c.join(", ")),r.a.createElement("button",{onClick:function(t){return e.handleDelete(t)}},"Delete"))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleTagChange=function(e){a.setState({tag:e.target.value})},a.fetchPosts=function(){var e=[],t=[],n=[],r={};b.a.firestore().collection("tags").doc(a.state.tag).collection("shayaris").get().then(function(c){var s=0;c.forEach(function(a){e.push(a.data().title),t.push(a.data().content),n.push(a.id),Object.assign(r,Object(j.a)({},s,a.data().tags)),s++}),a.setState(function(a){return{title:e,content:t,id:n,relatedTags:r}})})},a.authMe=function(e){""!==a.state.password&&a.state.password===e.target.value&&a.setState({authenticated:!0})},a.closeEditing=function(){a.setState({editing:!1,open:!0,message:"successfully deleted",title:[],content:[],id:[],relatedTags:{}})},a.handleSnackbarClose=function(){a.setState({open:!1,message:""})},a.state={tag:"",title:[],content:[],id:[],authenticated:!1,password:"",relatedTags:{},editing:!1,i:-1,open:!1,message:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.firestore().collection("users").doc("auth").get().then(function(t){e.setState({password:t.data().password})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.i,n=t.title,c=t.content,s=t.relatedTags,i=t.id,o=t.tag;return this.state.authenticated?this.state.editing?r.a.createElement(X,{tag:o,relatedTags:s[a],title:n[a],content:c[a],id:i[a],closeEditing:this.closeEditing}):r.a.createElement("div",null,r.a.createElement("select",{value:o,onChange:function(t){return e.handleTagChange(t)}},r.a.createElement("option",{value:""},"--select a tag--"),this.props.tags.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})),r.a.createElement("button",{onClick:this.fetchPosts,disabled:!o},"Fetch posts"),n.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:"div".concat(a),onClick:function(t){return e.setState({editing:!0,i:a})}},r.a.createElement("div",{className:"div".concat(a)},t),r.a.createElement("br",null),r.a.createElement("div",{className:"div".concat(a)},c[a]),r.a.createElement("div",null,s[a].join(", "))),r.a.createElement("hr",null))}),r.a.createElement(y,{open:this.state.open,message:this.state.message,handleClose:this.handleSnackbarClose})):r.a.createElement("input",{placeholder:"password",onChange:function(t){return e.authMe(t)}})}}]),t}(n.Component),$=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).putIntoShayariObject=function(t){e.setState(function(e){return{shayariObject:Object.assign(e.shayariObject,t)}})},e.state={tags:[],loading:!0,shayariObject:{}},e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[],a={},n=0;b.a.firestore().collection("tags").get().then(function(r){r.forEach(function(e){var r=e.id;n=e.data().totalShayaris,t.push(r),a[r]={titleArray:[],totalShayaris:n}}),t.forEach(function(e){a[e].relatedTagsObject={};for(var t=0;t<n;t++)a[e].relatedTagsObject[t]=[]}),e.setState(function(e){return{tags:t,loading:!1,shayariObject:Object.assign({},e.shayariObject,a)}})}).catch(function(e){alert(e.message)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tags,n=t.shayariObject;return this.state.loading?r.a.createElement("h1",null,"loading"):r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement("div",{className:"header"},r.a.createElement(Q,null),r.a.createElement("span",{className:"headerName"},r.a.createElement(g.b,{to:"/",className:"link"},"\ud835\udceb\ud835\udcee\ud835\udcfc\ud835\udcfd\ud835\udcfc\ud835\udcf1\ud835\udcea\ud835\udd02\ud835\udcea\ud835\udcfb\ud835\udcf2\ud835\udcfc.\ud835\udcec\ud835\udcf8\ud835\udcf6"),r.a.createElement("span",null)),r.a.createElement(P,{tags:a})),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(p,{tags:a,shayariObject:n})}}),r.a.createElement(d.a,{path:"/tags/:tag",render:function(t){return r.a.createElement(T,{tag:t.match.params.tag,shayariObject:n,putIntoShayariObject:e.putIntoShayariObject})}}),r.a.createElement(d.a,{exact:!0,path:"/upload",render:function(e){return r.a.createElement(F,{tags:a})}}),r.a.createElement(d.a,{exact:!0,path:"/edit",render:function(e){return r.a.createElement(Z,{tags:a})}}),r.a.createElement(d.a,{path:"*",component:m}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.initializeApp({apiKey:"AIzaSyCEMfOB5_j1hIdpxVXOduBuUMTwj5txVZo",authDomain:"bestshayari-7f672.firebaseapp.com",databaseURL:"https://bestshayari-7f672.firebaseio.com",projectId:"bestshayari-7f672",storageBucket:"bestshayari-7f672.appspot.com",messagingSenderId:"1001640034721",appId:"1:1001640034721:web:251a9065628579fe518be0",measurementId:"G-EQP9800NT3"}),b.a.analytics(),s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports=a(130)}},[[97,1,2]]]);
//# sourceMappingURL=main.0c065fdc.chunk.js.map