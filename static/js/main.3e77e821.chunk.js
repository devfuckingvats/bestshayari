(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(t,e,a){},103:function(t,e,a){},104:function(t,e,a){},125:function(t,e,a){},128:function(t,e,a){},129:function(t,e,a){},130:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),s=(a(102),a(16)),o=a(13),l=a(19),u=a(17),h=a(18),d=(a(103),a(28)),g=a(40),m=(a(104),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props.tags;return r.a.createElement(r.a.Fragment,null,t.map(function(t){return r.a.createElement("div",{className:"tagCards",key:t},r.a.createElement(d.b,{to:"/tags/".concat(t)},t))}))}}]),e}(n.Component)),p=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error404"))}}]),e}(n.Component),f=a(12),b=a.n(f),E=a(79),v=a(53),y=(a(125),a(182));var O=function(t){var e=t.open,a=t.message,n=t.handleClose;return r.a.createElement("div",null,r.a.createElement(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e,onClose:n,message:a,autoHideDuration:2e3}))},j=a(80),C=a.n(j),w=a(81),k=a.n(w),S=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).fetchContent=function(){var t=[],e=[],n=[],r={},c=[];a.state.shayariObject[a.props.tag].titleArray.length||b.a.firestore().collection("tags").doc(a.props.tag).collection("shayaris").orderBy("timestamp","desc").get().then(function(i){var s=0;i.forEach(function(a){var i=a.data().title,o=a.data().content,l=a.data().poet;c=a.data().tags,t.push(i),e.push(o),n.push(l),Object.assign(r,Object(v.a)({},s,c)),s++}),a.setState(function(c){return{shayariObject:Object.assign({},c.shayariObject,Object(v.a)({},a.props.tag,Object(E.a)({},c.shayariObject[a.props.tag],{titleArray:t,contentArray:e,poetArray:n,relatedTagsObject:r})))}},function(){a.props.putIntoShayariObject(a.state.shayariObject)})})},a.handleContentClick=function(t,e){t.target.innerHTML=e},a.handleSnackbarClose=function(){a.setState({snackbar:!1})},a.handleCopy=function(){a.setState({snackbar:!0})},a.state={shayariObject:Object.assign({},t.shayariObject),snackbar:!1},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this,e=this.props.tag,a=this.state.shayariObject,n=a[e].titleArray,c=a[e].contentArray,i=a[e].poetArray,s=a[e].relatedTagsObject,o={fontSize:"22px"};return r.a.createElement("div",{id:"tagPage"},r.a.createElement("h2",{style:{textAlign:"center",textTransform:"capitalize"}},e),r.a.createElement("hr",null),a[e].titleArray.length?n.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"shayariCard div".concat(a)},r.a.createElement("div",{className:"shayariCardHeader div".concat(a)},r.a.createElement(C.a,{className:"copyBtn","data-clipboard-text":n[a].charAt(0).toUpperCase()+n[a].slice(1)+"\n"+c[a].charAt(0).toUpperCase()+c[a].slice(1)+"\nbestshayaris.com",onClick:t.handleCopy},"copy")),r.a.createElement("div",{className:"div".concat(a," shayariCardTitle")},e.charAt(0).toUpperCase()+e.slice(1)),r.a.createElement("br",null),r.a.createElement("div",{className:"div".concat(a," shayariCardContent"),onClick:function(e){return t.handleContentClick(e,c[a])}},c[a].length>200?c[a].substring(0,200)+"....":c[a]),r.a.createElement("div",{className:"shayariCardLinks"},r.a.createElement(k.a,{style:o}),s[a].map(function(t,e){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(d.b,{to:"./".concat(t),className:"relatedLinks"},0===e?null:",",t))})),r.a.createElement("div",{className:"shayariCardPoet"},i[a]),"\u2002"),r.a.createElement("hr",null))}):this.fetchContent(),r.a.createElement(O,{open:this.state.snackbar,message:"copied.",handleClose:this.handleSnackbarClose}))}}]),e}(n.Component),T=a(49),N=a(175),I=a(171),x=a(177),L=a(186),A=a(172),V=a(179),F=a(183),B=a(184),M=(a(128),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleTagChange=function(t){a.setState(function(e){return{tags:t.target.value}})},a.handleTitleChange=function(t){a.setState({title:t.target.value})},a.handleContentChange=function(t){a.setState({content:t.target.value})},a.handlePoetChange=function(t){a.setState({poet:t.target.value})},a.upload=function(){var t=a.state.tags,e=a.state.title,n=a.state.content,r=a.state.poet;t&&e&&n?(a.setState({uploading:!0}),""!==a.state.newTagInputValue?(a.setState(function(t){return{tags:[].concat(Object(T.a)(t.tags),[a.state.newTagInputValue])}}),b.a.firestore().collection("tags").doc(a.state.newTagInputValue).set({totalShayaris:0}).then(function(){a.state.tags.forEach(function(t,c){b.a.firestore().collection("tags").doc(t).update({totalShayaris:b.a.firestore.FieldValue.increment(1)}).then(function(){b.a.firestore().collection("tags").doc(t).collection("shayaris").doc().set({title:e,content:n,timestamp:b.a.firestore.FieldValue.serverTimestamp(),tags:a.state.tags,poet:r}).then(function(){c===a.state.tags.length-1&&(a.setState({title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1}),alert("uploaded"))})}).catch(function(t){alert("cannot upload due to some error.")})})})):a.state.tags.forEach(function(t,c){b.a.firestore().collection("tags").doc(t).update({totalShayaris:b.a.firestore.FieldValue.increment(1)}).then(function(){b.a.firestore().collection("tags").doc(t).collection("shayaris").doc().set({title:e,content:n,poet:r,timestamp:b.a.firestore.FieldValue.serverTimestamp(),tags:a.state.tags}).then(function(){c===a.state.tags.length-1&&(a.setState({title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1}),alert("uploaded"))})}).catch(function(t){alert("cannot upload due to some error.")})})):alert("error")},a.showNewTagInput=function(){a.setState({newTagInput:!a.state.newTagInput})},a.handleNewTag=function(t){a.setState({newTagInputValue:t.target.value})},a.authMe=function(t){""!==a.state.password&&a.state.password===t.target.value&&a.setState({authenticated:!0})},a.state={authenticated:!1,password:"",title:"",content:"",poet:"",tags:[],newTagInput:!1,newTagInputValue:"",uploading:!1},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.a.firestore().collection("users").doc("auth").get().then(function(e){t.setState({password:e.data().password})})}},{key:"render",value:function(){var t=this;return this.state.authenticated?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(I.a,null,r.a.createElement(L.a,{htmlFor:"select-multiple-chip"},"Tag"),r.a.createElement(x.a,{multiple:!0,value:this.state.tags,onChange:function(e){return t.handleTagChange(e)},input:r.a.createElement(A.a,{id:"select-multiple-checkbox"}),renderValue:function(t){return t.join(", ")}},this.props.tags.map(function(e){return r.a.createElement(N.a,{key:e,value:e},r.a.createElement(V.a,{checked:t.state.tags.indexOf(e)>-1}),r.a.createElement(F.a,{primary:e}))})),r.a.createElement("button",{className:"newTagBtn",onClick:this.showNewTagInput},"New Tag"),this.state.newTagInput?r.a.createElement(B.a,{label:"New Tag",placeholder:"type your tag",value:this.state.newTagInputValue,onChange:this.handleNewTag}):null,r.a.createElement(B.a,{label:"Title",placeholder:"Choose title wisely",margin:"normal",value:this.state.title,onChange:function(e){return t.handleTitleChange(e)}}),r.a.createElement(B.a,{label:"Content",placeholder:"Write beyond imagination",multiline:!0,margin:"normal",value:this.state.content,onChange:function(e){return t.handleContentChange(e)}}),r.a.createElement(B.a,{label:"Poet",placeholder:"Poet",margin:"normal",value:this.state.poet,onChange:function(e){return t.handlePoetChange(e)}}),r.a.createElement("button",{type:"submit",onClick:this.upload,className:"uploadBtn",disabled:this.state.uploading},"Upload"))):r.a.createElement("input",{placeholder:"password",onChange:function(e){return t.authMe(e)}})}}]),e}(n.Component)),D=(a(129),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleInputFocus=function(t){a.setState({searching:!0})},a.handleInputChange=function(t){a.setState({searchingWord:t.target.value,searchingList:a.props.tags.filter(function(e){return-1!==e.indexOf(t.target.value.toLowerCase())})})},a.state={searching:!1,searchingWord:"",searchingList:t.tags},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,this.state.searching?window.addEventListener("popstate",function(){return t.setState({searching:!1,searchingWord:""})}):null,r.a.createElement("input",{style:this.state.searching?{position:"absolute",border:"none",left:"0",width:"100%",margin:"0",height:"35px"}:{position:"absolute",width:"20%",right:"0",margin:"6px",height:"25px",fontSize:"16px",border:"1px solid black",paddingLeft:"5px",transition:".4s",boxShadow:"1px 1px 3px"},placeholder:"search...",maxLength:"20",onClick:function(e){return t.setState({searching:!0,searchingWord:e.target.value})},value:this.state.searchingWord,onChange:function(e){return t.handleInputChange(e)}}),this.state.searching?r.a.createElement("div",{id:"searchingListParent"},r.a.createElement("ul",{className:"searchingList",onClick:function(){return t.setState({searching:!1,searchingWord:"",searchingList:t.props.tags})}},this.state.searchingList.map(function(t,e){return r.a.createElement(d.b,{key:t,to:"/tags/".concat(t),className:"searchingListItemLink"},r.a.createElement("li",{className:"searchingListItem"},t))}))):null)}}]),e}(n.Component)),P=a(83),W=a.n(P),z=a(180),H=a(82),U=a.n(H),J=a(176),K=a(174),G=a(134),Q=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).toggleDrawer=function(){a.setState({open:!a.state.open})},a.state={open:!1},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{fontSize:"large",onClick:this.toggleDrawer}),r.a.createElement(z.a,{anchor:"left",open:this.state.open,onClose:this.toggleDrawer},r.a.createElement("div",{role:"presentation",onClick:function(){return t.toggleDrawer()},onKeyDown:function(){return t.toggleDrawer()}},r.a.createElement(K.a,null,r.a.createElement(G.a,{button:!0},r.a.createElement(J.a,null,r.a.createElement(U.a,null)),r.a.createElement(F.a,null,r.a.createElement(d.b,{to:"/",className:"drawerTextLink"},"Home")))))))}}]),e}(n.Component);var R=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleTagChange=function(t){a.setState({tag:t.target.value})},a.fetchPosts=function(){b.a.firestore().collection("tags").doc(a.state.tag).collection("shayaris").get().then(function(t){t.forEach(function(t){a.setState(function(e){return{title:[].concat(Object(T.a)(e.title),[t.data().title]),content:[].concat(Object(T.a)(e.content),[t.data().content]),id:[].concat(Object(T.a)(e.id),[t.id])}})})})},a.authMe=function(t){""!==a.state.password&&a.state.password===t.target.value&&a.setState({authenticated:!0})},a.handleEdit=function(t){a.setState({editing:!0});var e=document.getElementsByClassName("div".concat(t))[0],n=document.getElementsByClassName("div".concat(t))[1];e.contentEditable=!0,n.contentEditable=!0},a.handleSave=function(t){a.setState({editing:!1});var e=document.getElementsByClassName("div".concat(t))[0],n=document.getElementsByClassName("div".concat(t))[1];e.contentEditable=!1,n.contentEditable=!1,console.log(a.state.id[t]),b.a.firestore().collection("tags").doc(a.state.tag).collection("shayaris").doc(a.state.id[t]).update({title:e.innerHTML,content:n.innerHTML})},a.state={tag:"",title:[],content:[],id:[],authenticated:!0,password:"",editing:!1,editingTitle:"",editingContent:""},a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.a.firestore().collection("users").doc("auth").get().then(function(e){t.setState({password:e.data().password})})}},{key:"render",value:function(){var t=this;return this.state.authenticated?r.a.createElement("div",null,r.a.createElement("select",{value:this.state.tag,onChange:function(e){return t.handleTagChange(e)}},r.a.createElement("option",{value:""},"--select an option--"),this.props.tags.map(function(t,e){return r.a.createElement("option",{key:e,value:t},t)})),r.a.createElement("button",{onClick:this.fetchPosts,disabled:!this.state.tag},"Fetch posts"),this.state.title.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("div",null,t.state.editing?r.a.createElement("div",null,r.a.createElement("span",{onClick:function(e){return t.handleSave(a)}},"save"),r.a.createElement("span",null,"discard")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",{onClick:function(e){return t.handleEdit(a)}},"Edit"))),r.a.createElement("div",{className:"div".concat(a)},e),r.a.createElement("br",null),r.a.createElement("div",{className:"div".concat(a)},t.state.content[a])),r.a.createElement("hr",null))})):r.a.createElement("input",{placeholder:"password",onChange:function(e){return t.authMe(e)}})}}]),e}(n.Component),X=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).putIntoShayariObject=function(e){t.setState(function(t){return{shayariObject:Object.assign(t.shayariObject,e)}})},t.state={tags:[],loading:!0,shayariObject:{}},t}return Object(h.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=[],a={},n=0;b.a.firestore().collection("tags").get().then(function(r){r.forEach(function(t){var r=t.id;n=t.data().totalShayaris,e.push(r),a[r]={titleArray:[],contentArray:[],poetArray:[]}}),e.forEach(function(t){a[t].relatedTagsObject={};for(var e=0;e<n;e++)a[t].relatedTagsObject[e]=[]}),t.setState(function(t){return{tags:e,loading:!1,shayariObject:Object.assign({},t.shayariObject,a)}})}).catch(function(t){alert(t.message)})}},{key:"render",value:function(){var t=this;return this.state.loading?r.a.createElement("h1",null,"loading"):r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement("div",{className:"header"},r.a.createElement(Q,null),r.a.createElement("span",{className:"headerName"},r.a.createElement(d.b,{to:"/",className:"link"},"\ud835\udceb\ud835\udcee\ud835\udcfc\ud835\udcfd\ud835\udcfc\ud835\udcf1\ud835\udcea\ud835\udd02\ud835\udcea\ud835\udcfb\ud835\udcf2\ud835\udcfc.\ud835\udcec\ud835\udcf8\ud835\udcf6")),r.a.createElement(D,{tags:this.state.tags})),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(m,{tags:t.state.tags})}}),r.a.createElement(g.a,{path:"/tags/:tag",render:function(e){return r.a.createElement(S,{tag:e.match.params.tag,shayariObject:t.state.shayariObject,putIntoShayariObject:t.putIntoShayariObject})}}),r.a.createElement(g.a,{exact:!0,path:"/upload",render:function(e){return r.a.createElement(M,{tags:t.state.tags})}}),r.a.createElement(g.a,{exact:!0,path:"/edit",render:function(e){return r.a.createElement(R,{tags:t.state.tags})}}),r.a.createElement(g.a,{path:"*",component:p}))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.initializeApp({apiKey:"AIzaSyCEMfOB5_j1hIdpxVXOduBuUMTwj5txVZo",authDomain:"bestshayari-7f672.firebaseapp.com",databaseURL:"https://bestshayari-7f672.firebaseio.com",projectId:"bestshayari-7f672",storageBucket:"bestshayari-7f672.appspot.com",messagingSenderId:"1001640034721",appId:"1:1001640034721:web:251a9065628579fe518be0",measurementId:"G-EQP9800NT3"}),b.a.analytics(),i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},97:function(t,e,a){t.exports=a(130)}},[[97,1,2]]]);
//# sourceMappingURL=main.3e77e821.chunk.js.map